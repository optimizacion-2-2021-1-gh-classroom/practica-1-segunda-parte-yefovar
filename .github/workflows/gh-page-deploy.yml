
name: gh-pages

on: [push]

jobs:
  docs:
    runs-on: ubuntu-latest
    steps:
    
    - uses: actions/checkout@v2
    - name: Sphinx 
      run: mkdir src/docs/_build && mkdir src/docs/_autosummary && mkdir src/docs/_static && mkdir src/docs/_templates && chmod gou+wrx -R src/docs
        docker run -v $(pwd):/datos --entrypoint /bin/bash --rm palmoreck/jupyterlab_optimizacion_2:3.0.0 -c "export PATH=$PATH:/home/miuser/.local/bin/ && cd /datos/src && pip install . && cd ../src/docs && make html"
        
    #- uses: ammaraskar/sphinx-action@master
    #  with:
    #    docs-folder: "src/docs/"
    #    build-command: "sphinx-build -b html . _build"

    - name: GitHub Pages action
      uses: peaceiris/actions-gh-pages@v3.7.3
      with:
        github_token: ${{ secrets.GITHUB_TOKEN }}
        publish_dir: ./src/docs/_build/html/**
        
